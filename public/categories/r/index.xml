<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>ariaPalermo</title>
    <link>/categories/r/index.xml</link>
    <description>Recent content on ariaPalermo</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>en-us</language>
    <atom:link href="/categories/r/index.xml" rel="self" type="application/rss+xml" />
    
    <item>
      <title>OpenCoesione</title>
      <link>/post/OpenCoesione/</link>
      <pubDate>Fri, 09 Dec 2016 18:26:14 -0100</pubDate>
      
      <guid>/post/OpenCoesione/</guid>
      <description>&lt;!-- BLOGDOWN-BODY-BEFORE

/BLOGDOWN-BODY-BEFORE --&gt;

&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;library(&amp;#39;httr&amp;#39;)
library(&amp;#39;jsonlite&amp;#39;)
library(&amp;#39;dplyr&amp;#39;)
library(&amp;#39;ggplot2&amp;#39;)
library(&amp;#39;scales&amp;#39;)
library(&amp;#39;DT&amp;#39;)&lt;/code&gt;&lt;/pre&gt;
&lt;div id=&#34;functions-to-query-the-opencoesione-api&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;Functions to query the OpenCoesione API&lt;/h1&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;options(stringsAsFactors = FALSE)

cp &amp;lt;- function(x) Filter(Negate(is.null), x)

user_agent &amp;lt;- &amp;#39;Mozilla/5.0 (Windows NT 6.1; WOW64; rv:40.0) Gecko/20100101 Firefox/40.0&amp;#39;

diss_base &amp;lt;- function() &amp;quot;http://www.opencoesione.gov.it/api&amp;quot;

diss_GET &amp;lt;- function(path = &amp;quot;&amp;quot;, args = list(), ...) {
  
  x &amp;lt;- httr::GET(file.path(diss_base(), path), query = args, 
                 httr::add_headers(&amp;quot;User-Agent&amp;quot; = user_agent), ...)
  
  httr::stop_for_status(x)
  
  jsonlite::fromJSON(httr::content(x, &amp;quot;text&amp;quot;, 
                     encoding=&amp;quot;UTF-8&amp;quot;))
}

diss &amp;lt;- function(apiroot = &amp;quot;progetti&amp;quot;, territorio = NULL, 
                 tema = NULL, natura = NULL, ...) {
  structure(
    diss_GET(apiroot, args = cp(list(territorio = territorio, 
                                     tema = tema, 
                                     natura = natura)), ...), 
             class = &amp;quot;ropencoesione&amp;quot;)
}&lt;/code&gt;&lt;/pre&gt;
&lt;div id=&#34;make-a-request&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;Make a request&lt;/h2&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;req &amp;lt;- diss(apiroot = &amp;quot;aggregati&amp;quot;)

str(req, 2)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## List of 2
##  $ contesto : NULL
##  $ aggregati:List of 4
##   ..$ totali   :List of 3
##   ..$ temi     :List of 13
##   ..$ nature   :List of 6
##   ..$ territori:List of 2
##  - attr(*, &amp;quot;class&amp;quot;)= chr &amp;quot;ropencoesione&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id=&#34;top-ten-regions-with-the-most-projects-well-almost&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;Top ten regions with the most projects (well, almostâ€¦)&lt;/h1&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;top_10_reg &amp;lt;- req$aggregati$territori$regioni %&amp;gt;% 
  Map(data.frame, .) %&amp;gt;% 
  bind_rows() %&amp;gt;% 
  mutate(regione = gsub(&amp;quot;-regione&amp;quot;, &amp;quot;&amp;quot;, basename(link))) %&amp;gt;%
  arrange(desc(totali.progetti)) %&amp;gt;%
  top_n(10, wt=totali.progetti)&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;datatable(top_10_reg, filter = &amp;quot;top&amp;quot;, options = list(
  pageLength = 5, autoWidth = TRUE
))&lt;/code&gt;&lt;/pre&gt;
&lt;div id=&#34;htmlwidget-a690f500da07b7675349&#34; style=&#34;width:100%;height:auto;&#34; class=&#34;datatables html-widget&#34;&gt;&lt;/div&gt;
&lt;script type=&#34;application/json&#34; data-for=&#34;htmlwidget-a690f500da07b7675349&#34;&gt;{&#34;x&#34;:{&#34;filter&#34;:&#34;top&#34;,&#34;filterHTML&#34;:&#34;&lt;tr&gt;\n  &lt;td&gt;\u003c/td&gt;\n  &lt;td data-type=\&#34;character\&#34; style=\&#34;vertical-align: top;\&#34;&gt;\n    &lt;div class=\&#34;form-group has-feedback\&#34; style=\&#34;margin-bottom: auto;\&#34;&gt;\n      &lt;input type=\&#34;search\&#34; placeholder=\&#34;All\&#34; class=\&#34;form-control\&#34; style=\&#34;width: 100%;\&#34;/&gt;\n      &lt;span class=\&#34;glyphicon glyphicon-remove-circle form-control-feedback\&#34;&gt;\u003c/span&gt;\n    \u003c/div&gt;\n  \u003c/td&gt;\n  &lt;td data-type=\&#34;number\&#34; style=\&#34;vertical-align: top;\&#34;&gt;\n    &lt;div class=\&#34;form-group has-feedback\&#34; style=\&#34;margin-bottom: auto;\&#34;&gt;\n      &lt;input type=\&#34;search\&#34; placeholder=\&#34;All\&#34; class=\&#34;form-control\&#34; style=\&#34;width: 100%;\&#34;/&gt;\n      &lt;span class=\&#34;glyphicon glyphicon-remove-circle form-control-feedback\&#34;&gt;\u003c/span&gt;\n    \u003c/div&gt;\n    &lt;div style=\&#34;display: none; position: absolute; width: 200px;\&#34;&gt;\n      &lt;div data-min=\&#34;963683591\&#34; data-max=\&#34;24962521530\&#34;&gt;\u003c/div&gt;\n      &lt;span style=\&#34;float: left;\&#34;&gt;\u003c/span&gt;\n      &lt;span style=\&#34;float: right;\&#34;&gt;\u003c/span&gt;\n    \u003c/div&gt;\n  \u003c/td&gt;\n  &lt;td data-type=\&#34;integer\&#34; style=\&#34;vertical-align: top;\&#34;&gt;\n    &lt;div class=\&#34;form-group has-feedback\&#34; style=\&#34;margin-bottom: auto;\&#34;&gt;\n      &lt;input type=\&#34;search\&#34; placeholder=\&#34;All\&#34; class=\&#34;form-control\&#34; style=\&#34;width: 100%;\&#34;/&gt;\n      &lt;span class=\&#34;glyphicon glyphicon-remove-circle form-control-feedback\&#34;&gt;\u003c/span&gt;\n    \u003c/div&gt;\n    &lt;div style=\&#34;display: none; position: absolute; width: 200px;\&#34;&gt;\n      &lt;div data-min=\&#34;27606\&#34; data-max=\&#34;402952\&#34;&gt;\u003c/div&gt;\n      &lt;span style=\&#34;float: left;\&#34;&gt;\u003c/span&gt;\n      &lt;span style=\&#34;float: right;\&#34;&gt;\u003c/span&gt;\n    \u003c/div&gt;\n  \u003c/td&gt;\n  &lt;td data-type=\&#34;number\&#34; style=\&#34;vertical-align: top;\&#34;&gt;\n    &lt;div class=\&#34;form-group has-feedback\&#34; style=\&#34;margin-bottom: auto;\&#34;&gt;\n      &lt;input type=\&#34;search\&#34; placeholder=\&#34;All\&#34; class=\&#34;form-control\&#34; style=\&#34;width: 100%;\&#34;/&gt;\n      &lt;span class=\&#34;glyphicon glyphicon-remove-circle form-control-feedback\&#34;&gt;\u003c/span&gt;\n    \u003c/div&gt;\n    &lt;div style=\&#34;display: none; position: absolute; width: 200px;\&#34;&gt;\n      &lt;div data-min=\&#34;705291765\&#34; data-max=\&#34;12098325478\&#34;&gt;\u003c/div&gt;\n      &lt;span style=\&#34;float: left;\&#34;&gt;\u003c/span&gt;\n      &lt;span style=\&#34;float: right;\&#34;&gt;\u003c/span&gt;\n    \u003c/div&gt;\n  \u003c/td&gt;\n  &lt;td data-type=\&#34;character\&#34; style=\&#34;vertical-align: top;\&#34;&gt;\n    &lt;div class=\&#34;form-group has-feedback\&#34; style=\&#34;margin-bottom: auto;\&#34;&gt;\n      &lt;input type=\&#34;search\&#34; placeholder=\&#34;All\&#34; class=\&#34;form-control\&#34; style=\&#34;width: 100%;\&#34;/&gt;\n      &lt;span class=\&#34;glyphicon glyphicon-remove-circle form-control-feedback\&#34;&gt;\u003c/span&gt;\n    \u003c/div&gt;\n  \u003c/td&gt;\n\u003c/tr&gt;&#34;,&#34;data&#34;:[[&#34;1&#34;,&#34;2&#34;,&#34;3&#34;,&#34;4&#34;,&#34;5&#34;,&#34;6&#34;,&#34;7&#34;,&#34;8&#34;,&#34;9&#34;,&#34;10&#34;],[&#34;http://www.opencoesione.gov.it/api/aggregati/territori/lombardia-regione&#34;,&#34;http://www.opencoesione.gov.it/api/aggregati/territori/puglia-regione&#34;,&#34;http://www.opencoesione.gov.it/api/aggregati/territori/friuli-venezia-giulia-regione&#34;,&#34;http://www.opencoesione.gov.it/api/aggregati/territori/toscana-regione&#34;,&#34;http://www.opencoesione.gov.it/api/aggregati/territori/campania-regione&#34;,&#34;http://www.opencoesione.gov.it/api/aggregati/territori/sicilia-regione&#34;,&#34;http://www.opencoesione.gov.it/api/aggregati/territori/piemonte-regione&#34;,&#34;http://www.opencoesione.gov.it/api/aggregati/territori/calabria-regione&#34;,&#34;http://www.opencoesione.gov.it/api/aggregati/territori/marche-regione&#34;,&#34;http://www.opencoesione.gov.it/api/aggregati/territori/abruzzo-regione&#34;],[2578041958,18250137001,963683591,3096445760,24962521530,19390882678,3272896827,10503346174,982154933,1399806474],[402952,72583,64886,64247,52466,51222,37172,36062,29815,27606],[2164411038,10947972913,705291765,2644262304,12098325478,10225072682,2333757399,6815398746,821107998,750918193],[&#34;lombardia&#34;,&#34;puglia&#34;,&#34;friuli-venezia-giulia&#34;,&#34;toscana&#34;,&#34;campania&#34;,&#34;sicilia&#34;,&#34;piemonte&#34;,&#34;calabria&#34;,&#34;marche&#34;,&#34;abruzzo&#34;]],&#34;container&#34;:&#34;&lt;table class=\&#34;display\&#34;&gt;\n  &lt;thead&gt;\n    &lt;tr&gt;\n      &lt;th&gt; \u003c/th&gt;\n      &lt;th&gt;link\u003c/th&gt;\n      &lt;th&gt;totali.costi\u003c/th&gt;\n      &lt;th&gt;totali.progetti\u003c/th&gt;\n      &lt;th&gt;totali.pagamenti\u003c/th&gt;\n      &lt;th&gt;regione\u003c/th&gt;\n    \u003c/tr&gt;\n  \u003c/thead&gt;\n\u003c/table&gt;&#34;,&#34;options&#34;:{&#34;pageLength&#34;:5,&#34;autoWidth&#34;:true,&#34;columnDefs&#34;:[{&#34;className&#34;:&#34;dt-right&#34;,&#34;targets&#34;:[2,3,4]},{&#34;orderable&#34;:false,&#34;targets&#34;:0}],&#34;order&#34;:[],&#34;orderClasses&#34;:false,&#34;orderCellsTop&#34;:true,&#34;lengthMenu&#34;:[5,10,25,50,100]},&#34;selection&#34;:{&#34;mode&#34;:&#34;multiple&#34;,&#34;selected&#34;:null,&#34;target&#34;:&#34;row&#34;}},&#34;evals&#34;:[],&#34;jsHooks&#34;:[]}&lt;/script&gt;
&lt;/div&gt;
&lt;div id=&#34;barchart&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;Barchart&lt;/h1&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;ggplot(top_10_reg, aes(reorder(regione, totali.progetti), totali.progetti)) + 
  geom_bar(stat = &amp;quot;identity&amp;quot;) +
  scale_y_continuous(labels = comma) +
  labs(x = &amp;quot;&amp;quot;, y = &amp;quot;Totali progetti&amp;quot;) + 
  theme(axis.text.x = element_text(angle=45, hjust=1))&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;#####../content/post/OpenCoesione_files/figure-html/unnamed-chunk-6-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;/div&gt;



&lt;!-- BLOGDOWN-HEAD

&lt;script src=&#34;#####../content/post/OpenCoesione_files/htmlwidgets-0.8/htmlwidgets.js&#34;&gt;&lt;/script&gt;
&lt;script src=&#34;#####../content/post/OpenCoesione_files/jquery-1.12.4/jquery.min.js&#34;&gt;&lt;/script&gt;
&lt;script src=&#34;#####../content/post/OpenCoesione_files/datatables-binding-0.2/datatables.js&#34;&gt;&lt;/script&gt;
&lt;link href=&#34;#####../content/post/OpenCoesione_files/dt-core-1.10.12/css/jquery.dataTables.min.css&#34; rel=&#34;stylesheet&#34; /&gt;
&lt;link href=&#34;#####../content/post/OpenCoesione_files/dt-core-1.10.12/css/jquery.dataTables.extra.css&#34; rel=&#34;stylesheet&#34; /&gt;
&lt;script src=&#34;#####../content/post/OpenCoesione_files/dt-core-1.10.12/js/jquery.dataTables.min.js&#34;&gt;&lt;/script&gt;
&lt;link href=&#34;#####../content/post/OpenCoesione_files/nouislider-7.0.10/jquery.nouislider.min.css&#34; rel=&#34;stylesheet&#34; /&gt;
&lt;script src=&#34;#####../content/post/OpenCoesione_files/nouislider-7.0.10/jquery.nouislider.min.js&#34;&gt;&lt;/script&gt;
&lt;link href=&#34;#####../content/post/OpenCoesione_files/selectize-0.12.0/selectize.bootstrap3.css&#34; rel=&#34;stylesheet&#34; /&gt;
&lt;script src=&#34;#####../content/post/OpenCoesione_files/selectize-0.12.0/selectize.min.js&#34;&gt;&lt;/script&gt;





/BLOGDOWN-HEAD --&gt;
</description>
    </item>
    
    <item>
      <title>Hello World</title>
      <link>/post/hello-world/</link>
      <pubDate>Thu, 23 Jul 2015 21:13:14 -0500</pubDate>
      
      <guid>/post/hello-world/</guid>
      <description>&lt;!-- BLOGDOWN-BODY-BEFORE

/BLOGDOWN-BODY-BEFORE --&gt;

&lt;div id=&#34;r-markdown&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;R Markdown&lt;/h1&gt;
&lt;p&gt;This is an R Markdown document. Markdown is a simple formatting syntax for authoring HTML, PDF, and MS Word documents. For more details on using R Markdown see &lt;a href=&#34;http://rmarkdown.rstudio.com&#34; class=&#34;uri&#34;&gt;http://rmarkdown.rstudio.com&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;You can embed an R code chunk like this:&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;summary(cars)
##      speed           dist       
##  Min.   : 4.0   Min.   :  2.00  
##  1st Qu.:12.0   1st Qu.: 26.00  
##  Median :15.0   Median : 36.00  
##  Mean   :15.4   Mean   : 42.98  
##  3rd Qu.:19.0   3rd Qu.: 56.00  
##  Max.   :25.0   Max.   :120.00
fit &amp;lt;- lm(dist ~ speed, data = cars)
fit
## 
## Call:
## lm(formula = dist ~ speed, data = cars)
## 
## Coefficients:
## (Intercept)        speed  
##     -17.579        3.932&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div id=&#34;including-plots&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;Including Plots&lt;/h1&gt;
&lt;p&gt;You can also embed plots. See Figure &lt;a href=&#34;#fig:pie&#34;&gt;1&lt;/a&gt; for example:&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;par(mar = c(0, 1, 0, 1))
pie(
  c(280, 60, 20),
  c(&amp;#39;Sky&amp;#39;, &amp;#39;Sunny side of pyramid&amp;#39;, &amp;#39;Shady side of pyramid&amp;#39;),
  col = c(&amp;#39;#0292D8&amp;#39;, &amp;#39;#F7EA39&amp;#39;, &amp;#39;#C4B632&amp;#39;),
  init.angle = -50, border = NA
)&lt;/code&gt;&lt;/pre&gt;
&lt;div class=&#34;figure&#34;&gt;&lt;span id=&#34;fig:pie&#34;&gt;&lt;/span&gt;
&lt;img src=&#34;#####../content/post/hello-world_files/figure-html/pie-1.png&#34; alt=&#34;A fancy pie chart.&#34; width=&#34;672&#34; /&gt;
&lt;p class=&#34;caption&#34;&gt;
Figure 1: A fancy pie chart.
&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;



&lt;!-- BLOGDOWN-HEAD






/BLOGDOWN-HEAD --&gt;
</description>
    </item>
    
  </channel>
</rss>